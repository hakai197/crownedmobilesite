<script>
    // Handle Contact & Appointment Forms
    document.getElementById('contactForm')?.addEventListener('submit', handleSubmit);
    document.getElementById('appointmentForm')?.addEventListener('submit', handleSubmit);

    async function handleSubmit(e) {
        e.preventDefault();
        const form = e.target;
        const submitBtn = form.querySelector('button[type="submit"]');
        
        // Disable button to prevent multiple submissions
        submitBtn.disabled = true;
        submitBtn.textContent = 'Sending...';

        try {
            const response = await fetch(form.action, {
                method: 'POST',
                body: new FormData(form),
                headers: { 'Accept': 'application/json' }
            });

            if (response.ok) {
                // Redirect to thank-you page
                window.location.href = 'thank-you.html';
            } else {
                throw new Error('Failed to send message');
            }
        } catch (error) {
            alert('Oops! Something went wrong. Please try again.');
            console.error(error);
        } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = form.id.includes('contact') ? 'Send Message' : 'Schedule Appointment';
        }
    }
</script>